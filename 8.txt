CREATE TABLE Library ( Book ID NUMBER PRIMARY KEY, Title VARCHAR2(100), Author VARCHAR2(100), Published_Year NUMBER );

CREATE TABLE Library_Audit (

Audit ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, Book_ID NUMBER, Title VARCHAR2(100), Author VARCHAR2(100), Published_Year NUMBER, Action VARCHAR2(10), Action_Timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP );

CREATE OR REPLACE TRIGGER trg_Library_Audit

AFTER UPDATE OR DELETE ON Library

FOR EACH ROW

BEGIN

IF UPDATING THEN

INSERT INTO Library Audit (Book_ID, Title, Author, Published_Year, Action) VALUES (:OLD.Book_ID, OLD. Title, OLD. Author, OLD. Published_Year, “UPDATE”);

ELSIF DELETING THEN

INSERT INTO Library Audit (Book ID, Title, Author, Published_Year, Action) VALUES (OLD.Book_ID, OLD.Title, OLD. Author, OLD. Published_Year, ‘DELETE’);

END IF;

END;

Insert sample data into Library

INSERT INTO Library (Book ID, Title, Author, Published_Year) VALUES (1, ‘1984’, ‘George Orwell”, 1949) INSERT INTO Library (Book ID, Title, Author, Published_Year) VALUES (2, ‘To Kill a Mockingbird”, “Harp

Update a record

UPDATE Library SET Title ‘Nineteen Eighty-Four WHERE Book ID = 1;

Delete a record

DELETE FROM Library WHERE Book_ID = 2;
--check the library audit table